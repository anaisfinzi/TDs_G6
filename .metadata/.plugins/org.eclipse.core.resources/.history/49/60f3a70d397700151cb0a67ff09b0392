/**
 * 
 */
package td6_7.exo5;

/**
 * @author fcamps
 *
 */
class LecteurMoniteur extends Thread 
{
	int id;
	LecteurRedacteurAvecMoniteur L;

	public LecteurMoniteur(LecteurRedacteurAvecMoniteur l, int _id) 
	{
		L = l;
		id = _id;
	}

	public void run() 
	{
		while (true)
		{
			L.debutLecture();
				System.out.println("lecteur : " + id);
			L.finLecture();
			yield();
		}
	}
}

/**
 * 
 * @author fcamps
 *
 */
class RedacteurMoniteur extends Thread 
{
	int id;
	LecteurRedacteurAvecMoniteur L;

	public RedacteurMoniteur(LecteurRedacteurAvecMoniteur l, int _id) 
	{
		id = _id;
		L = l;
	}

	public void run() 
	{
		while (true)
		{
			L.debutEcriture();
				System.out.println("redacteur : " +id);
			L.finEcriture();
			yield();
		}
	}
}

public class TestLecteurRedacteurMoniteur {

	/**
	 * @param args
	 */
	public static void main(String[] args) {

		LecteurRedacteurAvecMoniteur LR = new LecteurRedacteurAvecMoniteur();

		new RedacteurMoniteur(LR, 1).start();
		new RedacteurMoniteur(LR, 2).start();
		
		new LecteurMoniteur(LR, 1).start();	
		new LecteurMoniteur(LR, 2).start();
		new LecteurMoniteur(LR, 3).start();
	}
}
